import{d as m,o as e,c as a,a as o,t as b,F as i,b as p,_ as f,n as d,e as g,r as v,f as x,g as u,w as _,h as y,i as k,u as w}from"./index-cf73fa93.js";async function S(){const t=await(await fetch("https://script.google.com/macros/s/AKfycbzhZvb85DvQf37xZopLurDFjzwlIdWMxkcPJN9yFUu2E7lga3c-7s-bu3EYHGsgJ4n7/exec")).json(),{"Facility name":s,Drug:c}=t.data;return{facilities:s,drugs:c}}async function B(l){const t="https://script.google.com/macros/s/AKfycbzhZvb85DvQf37xZopLurDFjzwlIdWMxkcPJN9yFUu2E7lga3c-7s-bu3EYHGsgJ4n7/exec";try{console.log("sending data");const s=await fetch(t,{method:"POST",body:JSON.stringify(l)});if(s.ok){const c=await s.json();console.log("Data sent successfully:",c)}else console.error("Error sending data:",s.status,s.statusText)}catch(s){console.error("Error sending data:",s)}}const N={class:"text-lg mt-3"},D=p('<div class="flex gap-6"><div class="w-1/2"><input type="number" class="mt-2 mb-1"><label class="block text-sm text-neutral-500" for="">Stock on hand</label></div><div class="w-1/2"><input type="date" class="mt-2 mb-1"><label class="block text-sm text-neutral-500" for="">Expiry date</label></div></div>',1),$=m({__name:"batch",props:{batchNumber:{}},setup(l){return(t,s)=>(e(),a(i,null,[o("p",N,"Batch "+b(t.batchNumber),1),D],64))}}),z={name:"loading",props:{color:{type:String,default:"#fff"},text:{type:Boolean,default:!1},size:{type:Number,default:18},padding:{type:Number,default:2}},computed:{bubbleSize(){if(this.size!==18){const l=`height: ${this.size}px;`,t=`width: ${this.size}px;`;return l+t}return""},bubblePadding(){return this.padding!==2?`margin: ${this.padding}px;`:""},bubbleColor(){return this.color!=="#fff"?`background-color: ${this.color};`:""},bubbleCSS(){return this.bubbleColor+this.bubbleSize+this.bubblePadding}}};const C={class:"spinner"},E={key:0,class:"text"};function F(l,t,s,c,r,n){return e(),a("div",null,[o("div",C,[o("div",{class:"bounce1",style:d(n.bubbleCSS)},null,4),o("div",{class:"bounce2",style:d(n.bubbleCSS)},null,4),o("div",{class:"bounce3",style:d(n.bubbleCSS)},null,4)]),s.text?(e(),a("p",E,"Loading")):g("",!0)])}const j=f(z,[["render",F],["__scopeId","data-v-89e9cd0d"]]),J={class:"w-full max-w-lg m-auto bg-white p-8 shadow-md rounded-md"},L=o("h1",{class:"text-3xl mb-6 font-extrabold"},"Drug stock form",-1),P={key:0},I=o("label",{class:"block text-lg font-bold mb-2",for:""},"Facility name",-1),M={name:"",id:"",class:"mb-6"},O={value:""},V={class:"border-t border-slate-300 py-6"},Z={class:"text-xl font-bold"},T=["onClick"],A={key:1},G=o("p",{class:"uppercase text-sm font-medium mt-3 py-2 text-neutral-600"}," max three batches per medicine",-1),H=o("p",{class:"text-sm text-neutral-500 mt-2"},"If you have more than 3 batches then add any additional batch stocks to batch 3 using the same date",-1),K=[G,H],Q={key:1,class:"py-10"},U=o("p",{class:"text-center uppercase text-sm text-slate-400 font-bold mt-5"},"loading",-1),Y=m({__name:"form",setup(l){const t=v({facilities:[],drugs:[],drugBatches:{}});x(async()=>{const c=await S();t.value.facilities=c.facilities,t.value.drugs=c.drugs,s()});function s(){const c={};t.value.drugs.forEach(r=>{c[r]=1}),t.value.drugBatches=c}return(c,r)=>(e(),a("div",J,[L,t.value.facilities.length>0?(e(),a("form",P,[I,o("select",M,[(e(!0),a(i,null,u(t.value.facilities,n=>(e(),a("option",O,b(n),1))),256))]),(e(!0),a(i,null,u(t.value.drugs,n=>(e(),a("div",V,[o("h2",Z,b(n),1),(e(!0),a(i,null,u(t.value.drugBatches[n],h=>(e(),k($,{batchNumber:h},null,8,["batchNumber"]))),256)),t.value.drugBatches[n]<3?(e(),a("button",{key:0,onClick:_(h=>t.value.drugBatches[n]<3?t.value.drugBatches[n]+=1:void 0,["prevent"]),class:"uppercase text-sm font-medium mt-3 py-2 rounded-md text-sky-800"}," + add another batch ",8,T)):(e(),a("div",A,K))]))),256)),o("button",{onClick:r[0]||(r[0]=_(n=>w(B)({data:{value1:1,value:2}}),["prevent"]))}," submit ")])):(e(),a("div",Q,[y(j),U]))]))}});export{Y as default};
