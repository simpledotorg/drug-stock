import{d as b,o as s,c as o,a as n,t as d,F as i,b as p,r as _,e as f,f as u,w as h,g,h as v,u as x}from"./index-e8d572a9.js";async function y(){const e=await(await fetch("https://script.google.com/macros/s/AKfycbzhZvb85DvQf37xZopLurDFjzwlIdWMxkcPJN9yFUu2E7lga3c-7s-bu3EYHGsgJ4n7/exec")).json(),{"Facility name":t,Drug:a}=e.data;return{facilities:t,drugs:a}}async function k(r){const e="https://script.google.com/macros/s/AKfycbzhZvb85DvQf37xZopLurDFjzwlIdWMxkcPJN9yFUu2E7lga3c-7s-bu3EYHGsgJ4n7/exec";try{console.log("sending data");const t=await fetch(e,{method:"POST",body:JSON.stringify(r)});if(t.ok){const a=await t.json();console.log("Data sent successfully:",a)}else console.error("Error sending data:",t.status,t.statusText)}catch(t){console.error("Error sending data:",t)}}const w={class:"text-lg mt-3"},B=p('<div class="flex gap-6"><div class="w-1/2"><label class="block my-2" for="">Stock on hand</label><input type="number"></div><div class="w-1/2"><label class="block my-2" for="">Expiry date</label><input type="date"></div></div>',1),D=b({__name:"batch",props:{batchNumber:{}},setup(r){return(e,t)=>(s(),o(i,null,[n("p",w,"Batch "+d(e.batchNumber),1),B],64))}}),N={class:"w-full max-w-lg m-auto bg-white p-8 shadow-md rounded-md"},E=n("h1",{class:"text-3xl mb-6 font-extrabold"},"Drug stock form",-1),F={key:0},j=n("label",{class:"block text-lg font-bold mb-2",for:""},"Facility name",-1),S={name:"",id:"",class:"mb-6"},C={value:""},J={class:"border-t border-slate-300 py-6"},$={class:"text-xl font-bold"},z=["onClick"],M={key:1,class:"inline-block uppercase text-xs font-medium mt-6 p-1.5 px-3 rounded-md border border-slate-300"},Z=b({__name:"form",setup(r){const e=_({facilities:[],drugs:[],drugBatches:{}});f(async()=>{const a=await y();e.value.facilities=a.facilities,e.value.drugs=a.drugs,t()});function t(){const a={};e.value.drugs.forEach(l=>{a[l]=1}),e.value.drugBatches=a}return(a,l)=>(s(),o("div",N,[E,e.value.facilities.length>0?(s(),o("form",F,[j,n("select",S,[(s(!0),o(i,null,u(e.value.facilities,c=>(s(),o("option",C,d(c),1))),256))]),(s(!0),o(i,null,u(e.value.drugs,c=>(s(),o("div",J,[n("h2",$,d(c),1),(s(!0),o(i,null,u(e.value.drugBatches[c],m=>(s(),v(D,{batchNumber:m},null,8,["batchNumber"]))),256)),e.value.drugBatches[c]<3?(s(),o("button",{key:0,onClick:h(m=>e.value.drugBatches[c]<3?e.value.drugBatches[c]+=1:void 0,["prevent"]),class:"uppercase text-xs font-medium mt-6 p-1.5 px-3 rounded-md bg-sky-800 text-white"},"add another batch",8,z)):(s(),o("p",M,"max batches"))]))),256)),n("button",{onClick:l[0]||(l[0]=h(c=>x(k)({data:{value1:1,value:2}}),["prevent"]))}," submit ")])):g("",!0)]))}});export{Z as default};
