import{d as p,o as e,c as a,a as n,t as d,F as i,b,r as _,e as f,f as u,w as m,g,u as v}from"./index-f051da08.js";async function x(){const t=await(await fetch("https://script.google.com/macros/s/AKfycbzhZvb85DvQf37xZopLurDFjzwlIdWMxkcPJN9yFUu2E7lga3c-7s-bu3EYHGsgJ4n7/exec")).json(),{"Facility name":s,Drug:o}=t.data;return{facilities:s,drugs:o}}async function y(r){const t="https://script.google.com/macros/s/AKfycbzhZvb85DvQf37xZopLurDFjzwlIdWMxkcPJN9yFUu2E7lga3c-7s-bu3EYHGsgJ4n7/exec";try{console.log("sending data");const s=await fetch(t,{method:"POST",body:JSON.stringify(r)});if(s.ok){const o=await s.json();console.log("Data sent successfully:",o)}else console.error("Error sending data:",s.status,s.statusText)}catch(s){console.error("Error sending data:",s)}}const k={class:"text-lg mt-3"},w=b('<div class="flex gap-6"><div class="w-1/2"><label class="block my-2" for="">Stock on hand</label><input type="number"></div><div class="w-1/2"><label class="block my-2" for="">Expiry date</label><input type="date"></div></div>',1),B=p({__name:"batch",props:{batchNumber:{}},setup(r){return(t,s)=>(e(),a(i,null,[n("p",k,"Batch "+d(t.batchNumber),1),w],64))}}),D={class:"w-full max-w-lg m-auto bg-white p-8 shadow-md rounded-md"},E=n("h1",{class:"text-3xl mb-6 font-extrabold"},"Drug stock form",-1),F={key:0},N=n("label",{class:"block text-lg font-bold mb-2",for:""},"Facility name",-1),j={name:"",id:"",class:"mb-6"},S={value:""},J={class:"border-t border-slate-300 py-6"},$={class:"text-xl font-bold"},z=["onClick"],C={key:1,class:"inline-block uppercase text-xs font-medium mt-6 p-1.5 px-3 rounded-md border border-slate-300"},L={key:1,class:"text-xl"},O=p({__name:"form",setup(r){const t=_({facilities:[],drugs:[],drugBatches:{}});f(async()=>{const o=await x();t.value.facilities=o.facilities,t.value.drugs=o.drugs,s()});function s(){const o={};t.value.drugs.forEach(l=>{o[l]=1}),t.value.drugBatches=o}return(o,l)=>(e(),a("div",D,[E,t.value.facilities.length>0?(e(),a("form",F,[N,n("select",j,[(e(!0),a(i,null,u(t.value.facilities,c=>(e(),a("option",S,d(c),1))),256))]),(e(!0),a(i,null,u(t.value.drugs,c=>(e(),a("div",J,[n("h2",$,d(c),1),(e(!0),a(i,null,u(t.value.drugBatches[c],h=>(e(),g(B,{batchNumber:h},null,8,["batchNumber"]))),256)),t.value.drugBatches[c]<3?(e(),a("button",{key:0,onClick:m(h=>t.value.drugBatches[c]<3?t.value.drugBatches[c]+=1:void 0,["prevent"]),class:"uppercase text-xs font-medium mt-6 p-1.5 px-3 rounded-md bg-sky-800 text-white"},"add another batch",8,z)):(e(),a("p",C,"max batches"))]))),256)),n("button",{onClick:l[0]||(l[0]=m(c=>v(y)({data:{value1:1,value:2}}),["prevent"]))}," submit ")])):(e(),a("p",L,"Loading"))]))}});export{O as default};
